<!DOCTYPE html>
<html>
  <head>
    <title>Lightbox JSON API</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link href="/static/lightbox.css" rel="stylesheet">
    <link href="/static/jquery-ui-1.10.3.custom.css" rel="stylesheet">
  </head>
  <body class="dark">
    <script src="/static/jquery-1.9.1.min.js"></script>
    <script src="/static/jquery.lightbox_me.js"></script>
    <script src="/static/jquery.throttle.min.js"></script>
    <script src="/static/jquery-ui-1.10.3.custom.min.js"></script>
    <script src="/static/colorpicker-r54.js"></script>
    <script src="/static/lightbox.js"></script>
    <header>
      <h1>Lightbox Live</h1>
      <button class="theme-toggle" title="Theme selector">
        <div class="container">
          <span class="button-text light">Switch: dark evening</span>
          <span class="button-text dark">Switch: bright morning</span>
        </div>
      </button>
    </header>
    <p>Just below here you can see the the outputs of the Lightbox server. These are continuously updated from the server and show the live output of the LED strips or spots. On the left of each output is a stack of <em>layers</em>. Each of these layers can be set to a specific color and opacity. The server software then mixes the layers into a <em>mixed</em> output color.</p>
    <p>Start your own transition by clicking on any of the layers on the outputs. From there you can select the target color, opacity and the transition duration. When you then <em>apply</em> your transition, it will (soon) appear on the output.</p>
    <p class="dummy-controller hidden">The Lightbox server is currently connected with a <code>dummy</code> controller. This means that there is no actual light hardware attached, but everything else still works as intended.</p>
    <div id="preview">
      <div class="output">
        <h3>Output 1</h3>
        <div class="mixed-container">
          <div class="mixed smoothed"></div>
          mixed
        </div>
        <ol class="layers">
          <li class="layer">
            <div class="color-container">
              <div class="color maxheight smoothed"></div>
            </div>
            <span class="blender"></span>
            <span class="opacity"></span>
          </li>
        </ol>
      </div>
    </div>
    <div id="picker" class="modal transition-popup">
      <div class="modal-close close"></div>
      <div class="modal-header">
        <h4>Transition to new color</h4>
      </div>
      <div class="modal-content">
        <div class="color-picker"></div>
        <div class="preview">
          <div class="color-container">
            <div class="maxheight selected-color"></div>
          </div>
          <div class="color-container">
            <div class="maxheight selected-color selected-opacity"></div>
          </div>
        </div>
        <div class="sliders">
          <h5>Target opacity: <span class="slider-value opacity-value"></span></h5>
          <div class="slider opacity-slider"></div>
          <h5>Transition duration: <span class="slider-value steps-value"></span></h5>
          <div class="slider steps-slider"></div>
        </div>
        <div class="options">
          <h5>Layer blender</h5>
          <select class="blender">
            <option value="dummy">Dummy</option>
          </select>
          <h5>Trans. envelope</h5>
          <select class="envelope">
            <option value="dummy">Dummy</option>
          </select>
        </div>
        <div class="bottomrow">
          <input type="checkbox" id="update-immediate"><label for="update-immediate">Immediately apply color on change</label><br>
          <input type="checkbox" id="update-queued" checked="checked"><label for="update-queued">New transitions queue after current</label>
        </div>
        <button class="submit">Apply</button>
      </div>
    </div>
    <h2>What is this 'Lightbox'?</h2>
    <p>Late November 2011, we at <a href="http://frack.nl/wiki/">Frack</a> decided to do something <em>more</em> than just decorate a Christmas tree with some lights and call it a day. We envisioned an interactive internet-enabled illumination experience. To that end, we decorated a tree with five RGB LED-strips that changed color as people tweeted messages with colors (words and codes). The strips would change color, a webcam would capture the image of the tree and display this on a website, with the tweets superimposed. We dubbed it <a href="http://twitterboom.nl">Twitterboom</a> (this is Dutch for <em>Twitter tree</em>) and three weeks later it was reality.</p>
    <p>The results of this project were visible for the duration of the Christmas season in the public library of Leeuwarden (just accross the street from our hackerspace), and of course on the internet. Highlights are mentions on <a href="http://tweakers.net/nieuws/78907/hackerspace-laat-verlichting-kerstboom-bedienen-via-twitter.html">Tweakers.net</a>, <a href="https://hackerspaces.nl/2011/12/kerst-in-hackerspaces/">Hackerspaces.nl</a> and the <a href="http://jeroendeboer.net/2011/12/21/binnen-drie-weken-een-twitterboom-in-elkaar-gehackt/">blog</a> of the then-New Media Coordinator</em> of the aforementioned library.</p>
    <p>All code and documentation is <a href="https://github.com/frack/Lightbox">available on GitHub</a>.</p>
    <h2>JSON API Information</h2>
    <ul>
      <li>API commands should be sent to <code>/api</code> as <code>application/json</code>;</li>
      <li>Controller information can be retrieved from <a href="/api"><code>/api</code></a>;</li>
      <li>Output information (mixed and layer colors, opacity etc) can be retrieved from <a href="/api/outputs"><code>/api/outputs</code></a>.</li>
    </ul>
  </body>
</html>
